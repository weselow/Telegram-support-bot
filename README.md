# Telegram Support Bot

Telegram-бот техподдержки для сайта. Пользователи пишут боту в личные сообщения, для каждого обращения создаётся топик в супергруппе поддержки. Бот зеркалит переписку между пользователем и сотрудниками.

## Как это работает

```
┌─────────────┐         ┌─────────────┐         ┌─────────────────────┐
│   Клиент    │ ──DM──► │     Бот     │ ──────► │   Супергруппа       │
│  (Telegram) │ ◄──DM── │             │ ◄────── │   поддержки         │
└─────────────┘         └─────────────┘         │  ┌───────────────┐  │
                                                │  │ Топик клиента │  │
                                                │  └───────────────┘  │
                                                └─────────────────────┘
```

### Основной сценарий

1. **Клиент** пишет боту в личные сообщения
2. **Бот** создаёт топик в супергруппе поддержки (или использует существующий)
3. **Сообщение** пересылается в топик
4. **Сотрудник** отвечает в топике
5. **Ответ** пересылается клиенту в DM

### Статусы тикета

```
Новый → В работе → Ждём клиента → Закрыт
  │         │            │            │
  └─────────┴────────────┴────────────┘
            (можно переоткрыть)
```

### SLA-таймеры

При отсутствии ответа от поддержки:
- **10 мин** — первое напоминание в топике
- **30 мин** — второе напоминание
- **2 часа** — эскалация (DM администраторам)

### Автозакрытие

Если клиент не отвечает **7 дней** — тикет автоматически закрывается с уведомлением.

### Внутренние сообщения

Сообщения с префиксом `//` или `#internal` не пересылаются клиенту — для внутренней коммуникации сотрудников.

## Технологии

- **Runtime:** Node.js + TypeScript
- **Bot Framework:** Grammy
- **Database:** PostgreSQL + Prisma
- **Queue:** BullMQ + Redis
- **Monitoring:** Sentry
