# Задача 014: Автозакрытие через 7 дней

**Этап:** 4 - SLA и автоматизация
**Статус:** TODO
**Приоритет:** Средний

## Описание

Автоматически закрывать тикеты без ответа клиента через 7 дней.

## Подзадачи

- [ ] Job для автозакрытия (src/jobs/autoclose.job.ts):
  - [ ] Проверка статуса "Ждём клиента"
  - [ ] Закрытие тикета
  - [ ] Уведомление в топик
  - [ ] Запись события в ticket_events
- [ ] Запуск таймера при смене статуса на "Ждём клиента"
- [ ] Отмена таймера при ответе клиента
- [ ] Напоминание через 24 часа (опционально):
  - [ ] Сообщение сотрудникам в топик
- [ ] Уведомление клиенту о закрытии

## Зависимости

- [012-bullmq-setup](./012-bullmq-setup.md)
- [010-auto-status-change](./010-auto-status-change.md)

## Результат

- Тикеты автоматически закрываются через 7 дней
- Сотрудники получают напоминание через 24 часа
- Клиент уведомляется о закрытии
- Событие записывается в историю

---

## Начало работы

### 1. Создай ветку

```bash
git checkout -b feature/014-autoclose
```

### 2. Создай папку для решений

```bash
mkdir -p docs/solutions/014-autoclose
```

### 3. Веди историю решений

В файле `docs/solutions/014-autoclose/decisions.md` записывай:
- Текст уведомления клиенту
- Нужно ли напоминание через 24 часа
- Что если клиент напишет после автозакрытия

### 4. Перед завершением — код-ревью

Запусти команду `/check-code` для проверки кода перед мержем.

### 5. По завершении

```bash
git add .
git commit -m "feat(014): автозакрытие через 7 дней"
git checkout main
git merge feature/014-autoclose
```
