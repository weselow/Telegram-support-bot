# Задача 008: Карточка тикета с кнопками статусов

**Этап:** 2 - Основной функционал
**Статус:** DONE
**Приоритет:** Высокий

## Описание

Создать карточку тикета с inline-кнопками для управления статусом.

## Подзадачи

- [x] Формат карточки тикета:
  - [x] Telegram user (имя, @username)
  - [x] Телефон (если есть)
  - [x] Текущий статус
  - [x] Inline-кнопки: [В работу] [Ждём клиента] [Закрыть]
- [x] Обработчик callback-кнопок (src/bot/handlers/callback.ts):
  - [x] Парсинг callback_data
  - [x] Проверка прав (фильтр по группе в bot.ts)
  - [x] Обновление статуса в БД
  - [x] Редактирование карточки
  - [x] Отправка уведомления о смене статуса
- [x] Функция обновления карточки в topic.service.ts (updateTicketCard)
- [x] Запись события в ticket_events

## Зависимости

- [005-topic-creation](./005-topic-creation.md)

## Результат

- Карточка отображает актуальный статус
- Кнопки меняют статус
- В топик приходит уведомление о смене
- Событие записывается в историю

---

## Начало работы

### 1. Создай ветку

```bash
git checkout -b feature/008-ticket-card-buttons
```

### 2. Создай папку для решений

```bash
mkdir -p docs/solutions/008-ticket-card-buttons
```

### 3. Веди историю решений

В файле `docs/solutions/008-ticket-card-buttons/decisions.md` записывай:
- Формат callback_data
- Какие кнопки показывать в каком статусе
- Формат уведомлений о смене статуса

### 4. По завершении

```bash
git add .
git commit -m "feat(008): карточка тикета с кнопками"
git checkout main
git merge feature/008-ticket-card-buttons
```
