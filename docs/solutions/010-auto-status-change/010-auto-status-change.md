# Задача 010: Автоматическая смена статусов

**Этап:** 3 - Расширенный функционал
**Статус:** DONE
**Приоритет:** Средний

## Описание

Автоматически менять статус тикета при определённых событиях.

## Подзадачи

- [x] Автосмена при ответе сотрудника:
  - [x] Если статус "Новый" → "В работе"
  - [x] Обновление карточки
  - [x] Запись события
- [x] Автосмена при ответе клиента:
  - [x] Если статус "Ждём клиента" → "В работе"
  - [x] Обновление карточки
  - [x] Запись события
- [x] Кнопка "Спасибо, вопрос решён" для клиента:
  - [x] Отображение в DM (под текстовыми сообщениями от поддержки)
  - [x] Обработчик callback
  - [x] Статус → "Закрыт"
  - [x] Уведомление в топик

## Результат

- Статусы меняются автоматически по правилам
- Клиент может закрыть тикет кнопкой "✅ Спасибо, вопрос решён"
- Все изменения логируются и записываются как события

## Созданные файлы

- `src/services/status.service.ts` — сервис автосмены статусов
- `src/bot/handlers/resolve.ts` — обработчик кнопки "Решено"

## Изменённые файлы

- `src/bot/handlers/support.ts` — интеграция автосмены NEW → IN_PROGRESS
- `src/bot/handlers/message.ts` — интеграция автосмены WAITING_CLIENT → IN_PROGRESS
- `src/services/message.service.ts` — добавлена кнопка "Решено" к сообщениям
- `src/bot/bot.ts` — зарегистрирован обработчик resolve callback
