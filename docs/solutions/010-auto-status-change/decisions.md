# Решения по задаче 010: Автоматическая смена статусов

## Правила автосмены

| Событие | Условие | Новый статус |
|---------|---------|--------------|
| Ответ сотрудника | status = NEW | IN_PROGRESS |
| Ответ клиента | status = WAITING_CLIENT | IN_PROGRESS |
| Клиент нажал "Решено" | любой кроме CLOSED | CLOSED |

## Реализация

### 1. Сервис смены статуса
Создать `src/services/status.service.ts` с функцией `autoChangeStatus()`:
- Проверяет текущий статус
- Меняет если нужно
- Обновляет карточку
- Записывает событие
- Возвращает boolean (изменился ли статус)

### 2. Кнопка "Решено" для клиента
- Показывать после каждого ответа сотрудника
- Inline кнопка под сообщением в DM
- Callback data: `resolve:{userId}`

### 3. Edge cases
- Быстрые последовательные сообщения: первое меняет статус, остальные — нет (идемпотентно)
- Клиент нажал "Решено" на старое сообщение после закрытия: показать "Тикет уже закрыт"
