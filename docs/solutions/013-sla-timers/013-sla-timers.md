# Задача 013: SLA-таймеры

**Этап:** 4 - SLA и автоматизация
**Статус:** DONE
**Приоритет:** Средний

## Описание

Реализовать напоминания по SLA: 10 мин, 30 мин, 2 часа.

## Подзадачи

- [x] Сервис SLA (src/services/sla.service.ts):
  - [x] Запуск таймеров при создании/переоткрытии тикета
  - [x] Отмена таймеров при ответе сотрудника
  - [x] ~~Перезапуск таймеров при новом сообщении клиента~~ (не требуется, см. decisions.md)
- [x] Job для SLA-напоминаний (src/jobs/sla.worker.ts):
  - [x] 10 мин: пинг админов в топике
  - [x] 30 мин: пинг админов в топике
  - [x] 2 часа: SLA breach + личное сообщение админам
- [x] Получение списка админов группы (src/services/group.service.ts)
- [x] Формат пинг-сообщений (не пересылаются клиенту — префикс //)
- [x] Логирование SLA-событий

## Зависимости

- [012-bullmq-setup](./012-bullmq-setup.md)
- [007-mirror-topic-to-user](./007-mirror-topic-to-user.md) (фильтрация сообщений бота)

## Результат

- Таймеры запускаются автоматически
- Напоминания приходят вовремя
- Сотрудники получают пинги
- Клиент не видит SLA-сообщения

---

## Начало работы

### 1. Создай ветку

```bash
git checkout -b feature/013-sla-timers
```

### 2. Создай папку для решений

```bash
mkdir -p docs/solutions/013-sla-timers
```

### 3. Веди историю решений

В файле `docs/solutions/013-sla-timers/decisions.md` записывай:
- Формат пинг-сообщений
- Как получать список участников группы
- Обработка случая когда админов нет

### 4. По завершении

```bash
git add .
git commit -m "feat(013): SLA-таймеры"
git checkout main
git merge feature/013-sla-timers
```
