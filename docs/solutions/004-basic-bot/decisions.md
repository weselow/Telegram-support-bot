# Decisions: 004-basic-bot

## 2025-12-26: Архитектура бота

### Выбор между long-polling и webhook

**Решение:** Long-polling для разработки, возможность переключения на webhook через переменную окружения.

**Причины:**
- Long-polling проще для локальной разработки
- Не требует SSL сертификата и публичного URL
- grammY поддерживает оба режима

### Структура обработчиков

```
src/bot/
├── bot.ts           # Инициализация бота
├── handlers/
│   └── start.ts     # /start command
└── middleware/
    └── logger.ts    # Логирование запросов (в будущем)
```

### Обработка ошибок

**Решение:** Использовать встроенный error handler grammY с логированием через pino.

- Все ошибки логируются
- Бот продолжает работу при ошибках обработчиков
- Критические ошибки (потеря соединения) приводят к graceful shutdown
