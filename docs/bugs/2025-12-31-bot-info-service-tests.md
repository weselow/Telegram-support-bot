# Unit-тесты для bot-info.service.ts

**Дата:** 2025-12-31
**Источник:** TD-046

## Проблема

Сервис `bot-info.service.ts` имел 0% покрытия тестами. Это создавало риск регрессий при изменениях, учитывая что сервис содержит важную логику кэширования и fallback.

## Решение

Создан файл `src/services/__tests__/bot-info.service.test.ts` с 9 тестами.

## Покрытые сценарии

**getBotInfo (8 тестов)**
- Успешное получение с аватаром
- Успешное получение без аватара (нет фото)
- Успешное получение без аватара (ошибка getUserProfilePhotos)
- Имя бота только из first_name (без last_name)
- Кэширование — второй вызов не делает API запрос
- Истечение TTL кэша — запрос после 1 часа
- Fallback на кэш при ошибке API
- Fallback на дефолтные значения без кэша

**clearBotInfoCache (1 тест)**
- Очистка кэша и принудительное обновление

## Изменённые файлы

- Создан: `src/services/__tests__/bot-info.service.test.ts`

## Результаты

- Покрытие bot-info.service.ts: 100% statements, 92.85% branches
- Все 263 теста проходят
- Typecheck и lint без ошибок
