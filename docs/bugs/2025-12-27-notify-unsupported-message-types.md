# Уведомление о неподдерживаемых типах сообщений

**Дата:** 2025-12-27
**Источник:** TD-001

## Проблема

Когда пользователь отправлял неподдерживаемый тип сообщения (polls, dice, venue и др.), функция логировала warning и возвращала `null`, но пользователь не получал уведомления. Сообщение молча терялось.

## Причина

В обработчике `message.ts` не проверялось возвращаемое значение `mirrorUserMessage()`. При неподдерживаемом типе функция возвращала `null`, но обработка продолжалась без уведомления пользователя.

## Решение

Добавлена проверка `mirrorResult === null` с отправкой уведомления пользователю и ранним возвратом из обработчика.

## Изменённые файлы

- `config/messages.json` — добавлено сообщение `unsupportedMessageType`
- `src/config/messages.ts` — добавлено поле в схему валидации
- `src/bot/handlers/message.ts` — добавлена проверка и уведомление

## Важно для разработчика

При добавлении поддержки новых типов сообщений нужно добавить соответствующий sender в `topicSenders` массив в `message.service.ts`.

Поддерживаемые типы: text, photo, video, document, voice, audio, video_note, sticker, animation, contact, location.
