# TD-001: Уведомление о неподдерживаемых типах сообщений

**Severity:** MEDIUM
**Source:** Security Review (task 006)
**File:** `src/services/message.service.ts:118-121`, `src/bot/handlers/message.ts`

## Проблема

Когда пользователь отправляет неподдерживаемый тип сообщения (polls, dice, venue и др.), функция логирует warning и возвращает `null`, но пользователь не получает уведомления. Сообщение молча теряется.

## Влияние

Пользователи думают, что их сообщение доставлено, хотя оно не было переслано в поддержку. Потенциальная потеря важных обращений.

## Рекомендация

В `message.ts` проверять возвращаемое значение `mirrorUserMessage` и уведомлять пользователя:

```typescript
const result = await mirrorUserMessage(...);
if (result === null) {
  await ctx.reply('Данный тип сообщения не поддерживается. Пожалуйста, отправьте текст, фото или документ.');
}
```

## Приоритет

Средний — исправить в ближайших задачах.

---

## Перед началом работы

Ознакомься со стандартом: [backlog-workflow-standard.md](../../standards/backlog-workflow-standard.md)
