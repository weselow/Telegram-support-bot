# 023: Загрузка файлов из веб-чата

**Статус:** TODO
**Приоритет:** Средний
**Оценка:** 4-6 часов

## Описание

Пользователь веб-чата должен иметь возможность отправлять изображения, файлы и голосовые сообщения в чат поддержки.

## Требования

### Функциональные
- [ ] Кнопка прикрепления файла в ChatInput
- [ ] Поддержка изображений (jpg, png, gif, webp)
- [ ] Поддержка документов (pdf, doc, txt и др.)
- [ ] Запись и отправка голосовых сообщений
- [ ] Превью изображения перед отправкой
- [ ] Прогресс-бар загрузки
- [ ] Ограничение размера файла (10 MB)

### Технические
- [ ] API endpoint `POST /api/chat/upload` (multipart/form-data)
- [ ] Валидация типа и размера файла на сервере
- [ ] Отправка в Telegram: `sendPhoto`, `sendDocument`, `sendVoice`
- [ ] Сохранение `mediaFileId` в БД для отображения в истории
- [ ] WebSocket уведомление о новом медиа

## API

```
POST /api/chat/upload
Content-Type: multipart/form-data

file: <binary>
type: "image" | "document" | "voice"

Response:
{
  "success": true,
  "data": {
    "id": "msg-id",
    "mediaUrl": "/api/media/...",
    "timestamp": "..."
  }
}
```

## UI компоненты

1. **AttachButton** - кнопка прикрепления (иконка скрепки)
2. **FilePreview** - превью перед отправкой с кнопками отмена/отправить
3. **VoiceRecorder** - запись голосового (hold-to-record или toggle)
4. **UploadProgress** - индикатор загрузки

## Ограничения

- Максимальный размер: 10 MB (ограничение Telegram для ботов)
- Поддерживаемые форматы изображений: jpg, png, gif, webp
- Голосовые: ogg/opus (формат Telegram)

## Связанные задачи

- [007](../solutions/007-mirror-topic-to-user/007-mirror-topic-to-user.md) - Зеркалирование медиа из топика уже работает
