# Задача 007: Зеркалирование сообщений (topic → user)

**Этап:** 2 - Основной функционал
**Статус:** TODO
**Приоритет:** Высокий

## Описание

Пересылать сообщения сотрудников из топика в DM пользователя.

## Подзадачи

- [ ] Обработчик сообщений в группе (src/bot/handlers/support.handler.ts):
  - [ ] Фильтрация: только сообщения из топиков (не General)
  - [ ] Фильтрация: только от участников (не от бота)
  - [ ] Определение пользователя по topic_id
  - [ ] Вызов сервиса зеркалирования
- [ ] Расширение message.service.ts:
  - [ ] Метод для отправки в DM
  - [ ] Сохранение связи в messages_map (direction: support_to_user)
- [ ] Middleware для проверки участника группы

## Зависимости

- [006-mirror-user-to-topic](./006-mirror-user-to-topic.md)

## Результат

- Сообщения сотрудников доставляются пользователю
- Системные сообщения бота не пересылаются
- Связь сообщений сохраняется

---

## История решений

> При начале работы над задачей создай папку:
> `docs/solutions/007-mirror-topic-to-user/`
>
> В ней веди файл `decisions.md` с историей принятых решений:
> - Фильтрация сообщений бота
> - Определение "системных" сообщений
> - Обработка ошибок доставки
