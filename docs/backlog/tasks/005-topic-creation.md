# Задача 005: Создание топика при первом сообщении

**Этап:** 2 - Основной функционал
**Статус:** TODO
**Приоритет:** Высокий

## Описание

При первом сообщении пользователя создавать топик в супергруппе и сохранять связь в БД.

## Подзадачи

- [ ] Сервис для работы с топиками (src/services/topic.service.ts):
  - [ ] Создание топика через Telegram API (createForumTopic)
  - [ ] Формирование названия топика (имя пользователя или ID)
- [ ] Сервис для работы с тикетами (src/services/ticket.service.ts):
  - [ ] Создание пользователя в БД
  - [ ] Запись события "opened" в ticket_events
- [ ] Репозитории (src/db/repositories/):
  - [ ] user.repository.ts
  - [ ] event.repository.ts
- [ ] Обработчик первого сообщения:
  - [ ] Проверка существования пользователя
  - [ ] Создание топика если нет
  - [ ] Отправка карточки тикета в топик
  - [ ] Закрепление карточки

## Зависимости

- [003-database-schema](./003-database-schema.md)
- [004-basic-bot](./004-basic-bot.md)

## Результат

- При первом сообщении создаётся топик
- Карточка тикета закреплена в топике
- Пользователь и событие сохранены в БД

---

## Начало работы

### 1. Создай ветку

```bash
git checkout -b feature/005-topic-creation
```

### 2. Создай папку для решений

```bash
mkdir -p docs/solutions/005-topic-creation
```

### 3. Веди историю решений

В файле `docs/solutions/005-topic-creation/decisions.md` записывай:
- Формат названия топика
- Формат карточки тикета
- Обработка ошибок Telegram API

### 4. По завершении

```bash
git add .
git commit -m "feat(005): создание топика при первом сообщении"
git checkout main
git merge feature/005-topic-creation
```
