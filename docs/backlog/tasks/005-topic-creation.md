# Задача 005: Создание топика при первом сообщении

**Этап:** 2 - Основной функционал
**Статус:** TODO
**Приоритет:** Высокий

## Описание

При первом сообщении пользователя создавать топик в супергруппе и сохранять связь в БД.

## Подзадачи

- [ ] Сервис для работы с топиками (src/services/topic.service.ts):
  - [ ] Создание топика через Telegram API (createForumTopic)
  - [ ] Формирование названия топика (имя пользователя или ID)
- [ ] Сервис для работы с тикетами (src/services/ticket.service.ts):
  - [ ] Создание пользователя в БД
  - [ ] Запись события "opened" в ticket_events
- [ ] Репозитории (src/db/repositories/):
  - [ ] user.repository.ts
  - [ ] event.repository.ts
- [ ] Обработчик первого сообщения:
  - [ ] Проверка существования пользователя
  - [ ] Создание топика если нет
  - [ ] Отправка карточки тикета в топик
  - [ ] Закрепление карточки

## Зависимости

- [003-database-schema](./003-database-schema.md)
- [004-basic-bot](./004-basic-bot.md)

## Результат

- При первом сообщении создаётся топик
- Карточка тикета закреплена в топике
- Пользователь и событие сохранены в БД

---

## История решений

> При начале работы над задачей создай папку:
> `docs/solutions/005-topic-creation/`
>
> В ней веди файл `decisions.md` с историей принятых решений:
> - Формат названия топика
> - Формат карточки тикета
> - Обработка ошибок Telegram API
