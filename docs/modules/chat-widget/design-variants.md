# Варианты дизайна Chat Widget

## Обзор

Виджет поддерживает два варианта отображения:
1. **Modal** - плавающее окно в углу экрана
2. **Drawer** - боковая панель на всю высоту

## Вариант 1: Floating Modal

**Файл превью**: `../mockup.html`

### Характеристики

| Параметр | Значение |
|----------|----------|
| Размер | 380 × 520px |
| Позиция | Фиксированная, угол экрана |
| Backdrop | Нет |
| Анимация | Scale + fade |

### Преимущества

- Минимальное визуальное воздействие на страницу
- Пользователь видит контент сайта за виджетом
- Классический, привычный вид чат-виджета
- Легко закрыть кликом вне окна

### Недостатки

- Меньше места для истории сообщений
- Может перекрывать важный контент
- На мобильных занимает большую часть экрана

### Когда использовать

- Десктоп с большим разрешением
- Пользователь часто переключается между чатом и сайтом
- Краткие консультации

### Визуальный стиль

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│                      Основной контент сайта                 │
│                                                             │
│                                          ┌─────────────┐    │
│                                          │   Header    │    │
│                                          ├─────────────┤    │
│                                          │             │    │
│                                          │  Messages   │    │
│                                          │             │    │
│                                          ├─────────────┤    │
│                                          │   Input     │    │
│                                          └─────────────┘    │
│                                                    [💬]     │
└─────────────────────────────────────────────────────────────┘
```

## Вариант 2: Full-height Drawer

**Файл превью**: `../mockup-drawer.html`

### Характеристики

| Параметр | Значение |
|----------|----------|
| Ширина | 420px |
| Высота | 100vh |
| Позиция | Справа, на всю высоту |
| Backdrop | Полупрозрачный с blur |
| Анимация | Slide-in справа |

### Преимущества

- Больше места для истории сообщений
- Четкое разделение между сайтом и чатом
- Иммерсивный опыт для длинных диалогов
- Лучше для мобильных устройств

### Недостатки

- Скрывает часть контента сайта
- Более "тяжелое" визуальное впечатление
- Требует явного закрытия

### Когда использовать

- Мобильные устройства
- Длинные консультации
- Когда нужен полный фокус на диалоге

### Визуальный стиль

```
┌──────────────────────────────┬──────────────┐
│                              │   Header     │
│                              ├──────────────┤
│   Основной контент           │              │
│   (затемнен с blur)          │   Messages   │
│                              │              │
│                              │              │
│                              │              │
│                              ├──────────────┤
│                              │   Telegram   │
│                              ├──────────────┤
│                              │   Input      │
└──────────────────────────────┴──────────────┘
```

## Переключение вариантов

### Способ 1: Data-атрибут (рекомендуется для простых случаев)

```html
<!-- Modal вариант (по умолчанию) -->
<script src="chat-widget.js" async></script>

<!-- Drawer вариант -->
<script src="chat-widget.js" data-variant="drawer" async></script>

<!-- Auto - выбор по размеру экрана -->
<script src="chat-widget.js" data-variant="auto" async></script>
```

### Способ 2: Конфигурация (рекомендуется для полного контроля)

```javascript
window.DellShopChatConfig = {
  variant: 'auto',  // 'modal' | 'drawer' | 'auto'

  // Настройки для auto режима
  responsive: {
    breakpoint: 768,     // px
    mobile: 'drawer',    // вариант для mobile
    desktop: 'modal'     // вариант для desktop
  }
}
```

### Способ 3: Runtime API

```javascript
// Инициализация
const chat = DellShopChat.init({ variant: 'modal' })

// Переключение на лету (если нужно)
chat.setVariant('drawer')

// Получить текущий вариант
console.log(chat.getVariant()) // 'drawer'
```

## Адаптивное поведение (Auto режим)

### Логика выбора

```typescript
function selectVariant(config: ResponsiveConfig): Variant {
  const width = window.innerWidth

  if (width < config.breakpoint) {
    return config.mobile  // drawer для мобильных
  }

  return config.desktop   // modal для десктопа
}
```

### Реакция на resize

```typescript
// Опционально: переключение при изменении размера окна
window.addEventListener('resize', debounce(() => {
  if (config.variant === 'auto') {
    const newVariant = selectVariant(config.responsive)
    if (newVariant !== currentVariant) {
      widget.setVariant(newVariant)
    }
  }
}, 250))
```

## Общие элементы UI

Оба варианта содержат одинаковые компоненты:

### 1. Header

```
┌─────────────────────────────────────┐
│ [Logo] Поддержка DellShop     [✕]  │
│         ● Онлайн                    │
└─────────────────────────────────────┘
```

### 2. Messages Area

```
┌─────────────────────────────────────┐
│ [Avatar] Здравствуйте!         10:30│
│                                     │
│           Добрый день! ○○○    10:31 │
│                                     │
│ [Avatar] Поддержка печатает...      │
└─────────────────────────────────────┘
```

### 3. Telegram Banner

```
┌─────────────────────────────────────┐
│ [TG] Продолжить в Telegram      [→] │
└─────────────────────────────────────┘
```

### 4. Input Area

```
┌─────────────────────────────────────┐
│ [Напишите сообщение...        ] [→] │
└─────────────────────────────────────┘
```

### 5. Floating Button (закрытое состояние)

```
      ┌─────┐
      │ 💬  │  ← Badge с кол-вом непрочитанных
      │  2  │
      └─────┘
```

## Стилевые константы

Общие для обоих вариантов:

```css
:root {
  /* Brand */
  --chat-brand: #1e3a8a;
  --chat-brand-hover: #1e40af;

  /* Background */
  --chat-bg: #ffffff;
  --chat-bg-secondary: #f8fafc;

  /* Text */
  --chat-text: #1e293b;
  --chat-text-secondary: #64748b;

  /* Border */
  --chat-border: #e2e8f0;
  --chat-radius: 16px;
  --chat-radius-sm: 12px;

  /* Shadow */
  --chat-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);

  /* Spacing */
  --chat-spacing: 16px;

  /* Messages */
  --chat-msg-user: #1e3a8a;
  --chat-msg-support: #f1f5f9;
}
```

## Состояния UI

Оба варианта поддерживают одинаковые состояния:

| Состояние | Описание |
|-----------|----------|
| `closed` | Только кнопка видна |
| `open` | Окно/drawer открыты |
| `typing` | Индикатор "печатает..." |
| `offline` | Форма обратной связи |
| `disconnected` | Сообщение о переподключении |
| `unread` | Badge с количеством новых |

## Файлы превью

Для визуального тестирования созданы HTML мокапы:

1. **`mockup.html`** - Modal вариант
   - Открыть в браузере
   - Использовать панель управления для переключения состояний

2. **`mockup-drawer.html`** - Drawer вариант
   - Открыть в браузере
   - Использовать панель управления для переключения состояний
